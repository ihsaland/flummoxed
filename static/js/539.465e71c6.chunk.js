"use strict";(self.webpackChunkflummoxed=self.webpackChunkflummoxed||[]).push([[539],{539:(e,t,a)=>{a.r(t),a.d(t,{default:()=>k});var r=a(9950),n=a(8089),i=a(9925),s=a(5277),o=a(6491),l=a(6639),c=a(2053),d=a(2235),u=a(3230),h=a(8160),x=a(226),p=a(3291),m=a(4275),g=a(9254),y=a(1367),f=a(6837),A=a(2715),b=a(4414);const j=(0,g.Ay)(n.A)((e=>{let{theme:t}=e;return{background:"linear-gradient(135deg, ".concat(t.palette.background.paper," 0%, ").concat(t.palette.background.default," 100%)"),borderRadius:2*t.shape.borderRadius,padding:t.spacing(4),position:"relative",overflow:"hidden","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:4,background:"linear-gradient(90deg, ".concat(t.palette.primary.main,", ").concat(t.palette.secondary.main,")")}}})),v=(0,g.Ay)(i.A)((e=>{let{theme:t}=e;return{"& .MuiOutlinedInput-root":{borderRadius:2*t.shape.borderRadius,transition:"all 0.2s ease-in-out","&:hover":{transform:"translateY(-2px)",boxShadow:t.shadows[4]}}}})),w=(0,g.Ay)(s.A)((e=>{let{theme:t}=e;return{borderRadius:t.shape.borderRadius,fontWeight:600,"&.easy":{background:t.palette.success.main,color:t.palette.success.contrastText},"&.medium":{background:t.palette.warning.main,color:t.palette.warning.contrastText},"&.hard":{background:t.palette.error.main,color:t.palette.error.contrastText}}})),S=(0,g.Ay)(o.A)((e=>{let{theme:t}=e;return{display:"flex",justifyContent:"center",gap:t.spacing(2),marginTop:t.spacing(2)}})),T=(0,g.Ay)(o.A)((e=>{let{theme:t}=e;return{textAlign:"center",background:"rgba(255, 255, 255, 0.1)",padding:t.spacing(1),borderRadius:t.shape.borderRadius,minWidth:"60px"}})),k=()=>{const{user:e}=(0,y.A)(),[t,a]=(0,r.useState)(null),[n,i]=(0,r.useState)(""),[g,k]=(0,r.useState)(!0),[B,C]=(0,r.useState)(""),[R,D]=(0,r.useState)(!1),[I,Y]=(0,r.useState)(null),[M,E]=(0,r.useState)(!1),[L,N]=(0,r.useState)(null),[P,q]=(0,r.useState)({hours:0,minutes:0,seconds:0}),[F,H]=(0,r.useState)(null);(0,r.useEffect)((()=>{(async()=>{try{const e=(await A.YZ.getTodayTeaser()).data;console.log("Teaser Response:",e),e.alreadySolved?(console.log("Already solved, previous teaser:",e.previousTeaser),E(!0),N(e.nextTeaserDate||null),e.previousTeaser&&H(e.previousTeaser)):a({id:e.id,question:e.question,difficulty:e.difficulty,points:e.points,timeLimit:e.timeLimit})}catch(e){console.error("Error fetching teaser:",e),C("Failed to fetch today's brain teaser. Please try again later.")}finally{k(!1)}})()}),[]),(0,r.useEffect)((()=>{if(t&&!R){const e=setInterval((()=>{Y((a=>null===a?t.timeLimit:a<=0?(clearInterval(e),0):a-1))}),1e3);return()=>clearInterval(e)}}),[t,R]),(0,r.useEffect)((()=>{const e=()=>{const e=new Date,t=new Date(e.toLocaleString("en-US",{timeZone:"America/New_York"})),a=new Date(t);a.setHours(24,0,0,0);const r=a.getTime()-e.getTime(),n=Math.floor(r/36e5),i=Math.floor(r%36e5/6e4),s=Math.floor(r%6e4/1e3);q({hours:n,minutes:i,seconds:s})};e();const t=setInterval(e,1e3);return()=>clearInterval(t)}),[]);return g?(0,b.jsx)(o.A,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh",children:(0,b.jsx)(l.A,{})}):M?(0,b.jsxs)(o.A,{children:[(0,b.jsx)(f._A,{children:(0,b.jsx)(c.A,{variant:"h4",gutterBottom:!0,children:"Today's Brain Teaser"})}),(0,b.jsxs)(d.A,{sx:{p:4,textAlign:"center",background:"rgba(30, 30, 30, 0.6)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[(0,b.jsx)(c.A,{variant:"h5",gutterBottom:!0,children:"You've Already Solved Today's Teaser!"}),(0,b.jsx)(c.A,{variant:"body1",paragraph:!0,children:"Come back tomorrow for a new challenge."}),L&&(0,b.jsxs)(c.A,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:["Next teaser available on: ",new Date(L).toLocaleDateString()]}),F&&(0,b.jsxs)(o.A,{mt:4,children:[(0,b.jsx)(c.A,{variant:"h6",gutterBottom:!0,children:"Yesterday's Solution"}),(0,b.jsx)(j,{children:(0,b.jsxs)(u.A,{spacing:2,children:[(0,b.jsxs)(o.A,{children:[(0,b.jsx)(c.A,{variant:"subtitle1",color:"text.secondary",children:"Question:"}),(0,b.jsx)(c.A,{variant:"body1",paragraph:!0,children:F.question})]}),(0,b.jsxs)(o.A,{children:[(0,b.jsx)(c.A,{variant:"subtitle1",color:"text.secondary",children:"Solution:"}),(0,b.jsx)(c.A,{variant:"body1",paragraph:!0,children:F.answer})]}),(0,b.jsxs)(o.A,{children:[(0,b.jsx)(w,{label:F.difficulty,className:F.difficulty}),(0,b.jsxs)(c.A,{variant:"body2",color:"text.secondary",sx:{mt:1},children:["Points: ",F.points]})]})]})})]}),(0,b.jsxs)(S,{children:[(0,b.jsxs)(T,{children:[(0,b.jsx)(c.A,{variant:"h6",children:P.hours}),(0,b.jsx)(c.A,{variant:"caption",children:"Hours"})]}),(0,b.jsxs)(T,{children:[(0,b.jsx)(c.A,{variant:"h6",children:P.minutes}),(0,b.jsx)(c.A,{variant:"caption",children:"Minutes"})]}),(0,b.jsxs)(T,{children:[(0,b.jsx)(c.A,{variant:"h6",children:P.seconds}),(0,b.jsx)(c.A,{variant:"caption",children:"Seconds"})]})]})]})]}):(0,b.jsxs)(o.A,{children:[(0,b.jsx)(f._A,{children:(0,b.jsx)(c.A,{variant:"h4",gutterBottom:!0,children:"Today's Brain Teaser"})}),(0,b.jsx)(p.N,{mode:"wait",children:t&&!R?(0,b.jsx)(m.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:(0,b.jsxs)(j,{children:[(0,b.jsxs)(u.A,{direction:"row",spacing:2,sx:{mb:3},children:[(0,b.jsx)(w,{label:t.difficulty.toUpperCase(),className:t.difficulty}),(0,b.jsx)(s.A,{label:"".concat(t.points," points"),color:"primary",variant:"outlined"}),(0,b.jsx)(s.A,{label:"Time: ".concat((e=>{const t=Math.floor(e/60),a=e%60;return"".concat(t,":").concat(a.toString().padStart(2,"0"))})(I||0)),color:I&&I<60?"error":"default",variant:"outlined"})]}),(0,b.jsx)(c.A,{variant:"h5",gutterBottom:!0,children:t.question}),(0,b.jsxs)(o.A,{component:"form",onSubmit:async e=>{if(e.preventDefault(),t){C(""),k(!0);try{const e=(await A.YZ.submitSolution({teaserId:t.id,solution:n})).data;e.success&&(D(!0),N(e.nextTeaserDate))}catch(a){C("Failed to submit answer. Please try again.")}finally{k(!1)}}},sx:{mt:4},children:[(0,b.jsx)(v,{fullWidth:!0,multiline:!0,rows:3,placeholder:"Enter your answer...",value:n,onChange:e=>i(e.target.value),disabled:g}),B&&(0,b.jsx)(h.A,{severity:"error",sx:{mt:2},children:B}),(0,b.jsx)(o.A,{sx:{mt:3,display:"flex",justifyContent:"flex-end"},children:(0,b.jsx)(x.A,{type:"submit",variant:"contained",size:"large",disabled:g||!n.trim(),children:g?"Submitting...":"Submit Answer"})})]})]})},"teaser"):R&&t?(0,b.jsx)(m.P.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},children:(0,b.jsxs)(d.A,{sx:{p:4,textAlign:"center",background:"linear-gradient(135deg, ".concat("easy"===t.difficulty?"#4caf50":"medium"===t.difficulty?"#ff9800":"#f44336"," 0%, ").concat("easy"===t.difficulty?"#81c784":"medium"===t.difficulty?"#ffb74d":"#e57373"," 100%)"),color:"white"},children:[(0,b.jsx)(c.A,{variant:"h4",gutterBottom:!0,children:"Congratulations!"}),(0,b.jsx)(c.A,{variant:"h6",gutterBottom:!0,children:"You've solved today's brain teaser!"}),(0,b.jsxs)(c.A,{variant:"body1",paragraph:!0,children:["You earned ",t.points," points"]}),L&&(0,b.jsx)(c.A,{variant:"body2",sx:{mb:2},children:"Come back tomorrow for a new challenge!"})]})},"success"):null})]})}}}]);